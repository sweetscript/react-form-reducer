var e=require("react");function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=/*#__PURE__*/t(e);function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}function o(){var t=e.useState({}),r=t[0],o=t[1],u={errors:r,has:function(e){return r&&!!Object.getOwnPropertyDescriptor(r,e)},hasErrors:function(){return Object.keys(r).length>0},get:function(e){return u.has(e)?r[e]:[]},first:function(e){var t;return u.has(e)?null==r||null==(t=r[e])?void 0:t[0]:null},all:function(){return r},add:function(e,t){var i=n({},r);u.has(e)||(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t),o(i)},set:function(e){o(e)},forget:function(e){if(e){if(r[e]){var t=n({},r);delete t[e],o(t)}}else u.hasErrors()&&o({})}};return u}function u(t,r,u){var i=o(),s=e.useState(!1),a=s[0],l=s[1],c=e.useState(!1),f=c[0],d=c[1],v=e.useState(1),p=v[0],h=v[1],g=(r||{}).onUpdateFields,x=e.useReducer(function(e,t){return n({},e,t)},t),b=x[0],m=x[1],y=e.useReducer(function(e,t){return n({},e,t)},u),F=y[1],O=function(e,t){void 0===t&&(t=!0),g&&(e=g(e)),m(e),l(t)},C=function(e,t){var r={};r[e]=t,O(r,!0),i.forget(e)},j=function(e){return function(t){var r=t.currentTarget||t.target,n=r.getAttribute("type")||"text";-1!==["checkbox","radio"].indexOf(n)?C(e,r instanceof HTMLInputElement&&r.checked):-1!==["number","range"].indexOf(n)?C(e,Number(r.value)):C(e,r.value)}},P=function(e){return function(t){C(e,t)}},E=function(e){F(e)};return{fields:b,setFields:O,setField:C,handleInputChange:j,assignFieldInput:function(e){return{onChange:j(e),value:null==b?void 0:b[e],disabled:f}},assignFieldUI:function(e){return{value:null==b?void 0:b[e],disabled:f,onChange:P(e),error:i.has(e),helperText:i.first(e)||void 0}},reset:function(){O(t,!1)},errors:i,isDirty:a,setIsDirty:l,isBusy:f,setIsBusy:d,step:p,setStep:h,validate:function(e){try{var t=null==r?void 0:r.validation;if(!t)throw new Error("No validator resolver passed");var n=t.validate(b,e);return 1==n?Promise.resolve({passed:!0}):(i.set(n),Promise.resolve({passed:!1,error:n}))}catch(e){return Promise.reject(e)}},meta:y[0],setAllMeta:E,setMeta:function(e,t){var r={};r[e]=t,E(r)}}}var i=/*#__PURE__*/e.createContext({});function s(){return i}exports.FormContext=s,exports.FormContextProvider=function(e){var t=e.children,n=u(e.defaultValues,e.options,e.defaultMeta),o=s();/*#__PURE__*/return r.default.createElement(o.Provider,{value:n},t)},exports.ValidationResolver=function(){},exports.useForm=u,exports.useFormContext=function(){return e.useContext(s())},exports.useFormErrors=o;
