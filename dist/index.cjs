var e=require("react");function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=/*#__PURE__*/t(e);function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}function o(){var t=e.useState({});return u(t[0],t[1])}function u(e,t){var r={errors:e,has:function(t){return e&&!!Object.getOwnPropertyDescriptor(e,t)},hasAny:function(t){return!!e&&t.filter(function(t){return!!Object.getOwnPropertyDescriptor(e,t)}).length>0},hasErrors:function(){return Object.keys(e).length>0}},o=t||function(e){r.errors=e};return r.get=function(t){return r.has(t)?e[t]:[]},r.first=function(t){var n;return r.has(t)?null==e||null==(n=e[t])?void 0:n[0]:null},r.all=function(){return e},r.add=function(t,u){var i=n({},e);r.has(t)||(i[t]=[]),-1===i[t].indexOf(u)&&i[t].push(u),o(i)},r.set=function(e){o(e)},r.forget=function(t){if(t){if(e[t]){var u=n({},e);delete u[t],o(u)}}else r.hasErrors()&&o({})},r}function i(t,r,i){var a=o(),s=e.useState(!1),c=s[0],l=s[1],f=e.useState(!1),d=f[0],v=f[1],p=e.useState(1),h=p[0],g=p[1],x=e.useState({passed:!1}),b=x[0],y=x[1],O=(r||{}).onUpdateFields,m=e.useReducer(function(e,t){return n({},e,t)},t),F=m[0],C=m[1],j=e.useReducer(function(e,t){return n({},e,t)},i),E=j[0],I=j[1],S=function(e,t){void 0===t&&(t=!0),O&&(e=O(e)),C(e),l(t)},w=function(e,t){var r={};r[e]=t,S(r,!0),a.forget(e)},M=function(e){return function(t){var r=t.currentTarget||t.target,n=r.getAttribute("type")||"text";-1!==["checkbox","radio"].indexOf(n)?w(e,r instanceof HTMLInputElement&&r.checked):-1!==["number","range"].indexOf(n)?w(e,Number(r.value)):w(e,r.value)}},P=function(e){return function(t){w(e,t)}},D=function(e){I(e)},k=function(e,t){void 0===t&&(t=!0);var n=null==r?void 0:r.validation;if(!n)throw new Error("No validator resolver passed");var o=n.validate(F,e);return 1==o?{passed:!0}:(t&&a.set(o),{passed:!1,errorMessages:o,errors:u(o)})};return e.useEffect(function(){null!=r&&r.validation&&y(k(void 0,!1))},[F]),{fields:F,setFields:S,setField:w,handleInputChange:M,assignFieldInput:function(e){return{onChange:M(e),value:null==F?void 0:F[e],disabled:d}},assignFieldUI:function(e){return{value:null==F?void 0:F[e],disabled:d,onChange:P(e),error:a.has(e),helperText:a.first(e)||void 0}},reset:function(){S(t,!1)},errors:a,isDirty:c,setIsDirty:l,isBusy:d,setIsBusy:v,step:h,setStep:g,validate:k,validationWatcher:b,meta:E,setAllMeta:D,setMeta:function(e,t){var r={};r[e]=t,D(r)}}}var a=/*#__PURE__*/e.createContext({});function s(){return a}exports.FormContext=s,exports.FormContextProvider=function(e){var t=e.children,n=i(e.defaultValues,e.options,e.defaultMeta),o=s();/*#__PURE__*/return r.default.createElement(o.Provider,{value:n},t)},exports.ValidationResolver=function(){},exports.useForm=i,exports.useFormContext=function(){return e.useContext(s())},exports.useFormErrors=o;
