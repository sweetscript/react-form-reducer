import e,{useState as r,useReducer as t,createContext as n,useContext as i}from"react";function o(){return o=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},o.apply(this,arguments)}function u(){var e=r({}),t=e[0],n=e[1],i={errors:t,has:function(e){return t&&!!Object.getOwnPropertyDescriptor(t,e)},hasErrors:function(){return Object.keys(t).length>0},get:function(e){return i.has(e)?t[e]:[]},first:function(e){var r;return!!i.has(e)&&(null==t||null==(r=t[e])?void 0:r[0])},all:function(){return t},add:function(e,r){var u=o({},t);i.has(e)||(u[e]=[]),-1===u[e].indexOf(r)&&u[e].push(r),n(u)},set:function(e){n(e)},forget:function(e){if(e){if(t[e]){var r=o({},t);delete r[e],n(r)}}else i.hasErrors()&&n({})}};return i}function a(e,n,i){var a=u(),s=r(!1),c=s[0],l=s[1],f=r(!1),d=f[0],v=f[1],p=r(1),h=p[0],g=p[1],b=(n||{}).onUpdateFields,y=t(function(e,r){return o({},e,r)},e),m=y[0],O=y[1],x=t(function(e,r){return o({},e,r)},i),j=x[1],I=function(e,r){void 0===r&&(r=!0),b&&(e=b(e)),O(e),l(r)},P=function(e,r){var t={};t[e]=r,I(t,!0),a.forget(e)},E=function(e){return function(r){var t=r.currentTarget||r.target,n=t.getAttribute("type")||"text";-1!==["checkbox","radio"].indexOf(n)?P(e,t instanceof HTMLInputElement&&t.checked):-1!==["number","range"].indexOf(n)?P(e,Number(t.value)):P(e,t.value)}},F=function(e){return{onChange:E(e),value:null==m?void 0:m[e],disabled:d}},w=function(e){j(e)};return{fields:m,setFields:I,setField:P,handleInputChange:E,assignFieldInput:F,assignFieldUI:function(e){return o({},F(e),{error:a.has(e),helperText:a.get(e)})},reset:function(){I(e,!1)},errors:a,isDirty:c,setIsDirty:l,isBusy:d,setIsBusy:v,step:h,setStep:g,validate:function(e){try{var r=null==n?void 0:n.validation;if(!r)throw new Error("No validator resolver passed");var t=r.validate(m,e);return 1==t?Promise.resolve({passed:!0}):(a.set(t),Promise.resolve({passed:!1,error:t}))}catch(e){return Promise.reject(e)}},meta:x[0],setAllMeta:w,setMeta:function(e,r){var t={};t[e]=r,w(t)}}}var s=/*#__PURE__*/n({});function c(){return s}function l(r){var t=r.children,n=a(r.defaultValues,r.options,r.defaultMeta),i=c();/*#__PURE__*/return e.createElement(i.Provider,{value:n},t)}function f(){return i(c())}var d=function(){};export{c as FormContext,l as FormContextProvider,d as ValidationResolver,a as useForm,f as useFormContext,u as useFormErrors};
