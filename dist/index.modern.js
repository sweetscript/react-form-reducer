import e,{useState as t,useReducer as r,createContext as n,useContext as s}from"react";import o from"validatorjs";function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i.apply(this,arguments)}const a=()=>{const[e,r]=t({}),n={errors:e,has:t=>e&&!!Object.getOwnPropertyDescriptor(e,t),hasErrors:()=>Object.keys(e).length>0,get:t=>n.has(t)?e[t]:[],first:t=>{var r;return!!n.has(t)&&(null==e||null==(r=e[t])?void 0:r[0])},all:()=>e,add:(t,s)=>{const o=i({},e);n.has(t)||(o[t]=[]),-1===o[t].indexOf(s)&&o[t].push(s),r(o)},set:e=>{r(e)},forget:t=>{if(t){if(e[t]){const n=i({},e);delete n[t],r(n)}}else n.hasErrors()&&r({})}};return n};function l(e,n){const s=a(),[l,u]=t(!1),[c,d]=t(!1),[f,p]=t(1),{onUpdateFields:h}=n||{},[v,g]=r((e,t)=>{let r=i({},e,t);return h&&(r=h(r)),r},e),O=(e,t=!0)=>{h&&(e=h(e)),g(e),u(t)},b=(e,t)=>{const r={};r[e]=t,O(r,!0),s.forget(e)};return{fields:v,setFields:O,setField:b,handleInputChange:e=>t=>{const r=t.currentTarget||t.target,n=r.getAttribute("type")||"text";-1!==["checkbox","radio"].indexOf(n)?b(e,r instanceof HTMLInputElement&&r.checked):-1!==["number","range"].indexOf(n)?b(e,Number(r.value)):b(e,r.value)},reset:()=>{O(e,!1)},errors:s,isDirty:l,setIsDirty:u,isBusy:c,setIsBusy:d,step:f,setStep:p,validate:function(e){let t=(null==n?void 0:n.validationRules)||{},r=v;if(e){r={};const n={};for(const s in v)-1!==e.indexOf(s)&&(r[s]=v[s],t[s]&&(n[s]=t[s]));t=n}const i=new o(r,t,null==n?void 0:n.validationMessages);if(i.passes())return!0;const a=i.errors.all();return s.set(a),!1}}}const u=/*#__PURE__*/n({});function c(){return u}function d({children:t,defaultValues:r,options:n}){const s=l(r,n),o=c();/*#__PURE__*/return e.createElement(o.Provider,{value:s},t)}function f(){return s(c())}export{c as FormContext,d as FormContextProvider,l as useForm,f as useFormContext,a as useFormErrors};
//# sourceMappingURL=index.modern.js.map
