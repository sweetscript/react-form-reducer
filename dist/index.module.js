import n,{useState as e,useReducer as t,useEffect as r,createContext as i,useContext as o}from"react";function u(){return u=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},u.apply(this,arguments)}function a(){var n=e({});return s(n[0],n[1])}function s(n,e){var t={errors:n,has:function(e){return n&&!!Object.getOwnPropertyDescriptor(n,e)},hasAny:function(e){return!!n&&e.filter(function(e){return!!Object.getOwnPropertyDescriptor(n,e)}).length>0},hasErrors:function(){return Object.keys(n).length>0}},r=e||function(n){t.errors=n};return t.get=function(e){return t.has(e)?n[e]:[]},t.first=function(e){var r;return t.has(e)?null==n||null==(r=n[e])?void 0:r[0]:null},t.all=function(){return n},t.add=function(e,i){var o=u({},n);t.has(e)||(o[e]=[]),-1===o[e].indexOf(i)&&o[e].push(i),r(o)},t.set=function(n){r(n)},t.forget=function(e){if(e){if(n[e]){var i=u({},n);delete i[e],r(i)}}else t.hasErrors()&&r({})},t}function l(n,i,o){var l=a(),c=e(!1),f=c[0],d=c[1],v=e(!1),p=v[0],h=v[1],g=e(1),b=g[0],y=g[1],O=e({passed:!1}),m=O[0],x=O[1],j=(i||{}).onUpdateFields,I=t(function(n,e){return u({},n,e)},n),w=I[0],E=I[1],F=t(function(n,e){return u({},n,e)},o),M=F[0],D=F[1],P=function(n,e){void 0===e&&(e=!0),j&&(n=j(n)),E(n),d(e)},k=function(n,e){var t={};t[n]=e,P(t,!0),l.forget(n)},A=function(n){return function(e){var t=e.currentTarget||e.target,r=t.getAttribute("type")||"text";-1!==["checkbox","radio"].indexOf(r)?k(n,t instanceof HTMLInputElement&&t.checked):-1!==["number","range"].indexOf(r)?k(n,Number(t.value)):k(n,t.value)}},C=function(n){return function(e){k(n,e)}},T=function(n){D(n)},B=function(n,e){void 0===e&&(e=!0);var t=null==i?void 0:i.validation;if(!t)throw new Error("No validator resolver passed");var r=t.validate(w,n);return 1==r?{passed:!0}:(e&&l.set(r),{passed:!1,errorMessages:r,errors:s(r)})};return r(function(){null!=i&&i.validation&&x(B(void 0,!1))},[w]),{fields:w,setFields:P,setField:k,handleInputChange:A,assignFieldInput:function(n){return{onChange:A(n),value:null==w?void 0:w[n],disabled:p}},assignFieldUI:function(n){return{value:null==w?void 0:w[n],disabled:p,onChange:C(n),error:l.has(n),helperText:l.first(n)||void 0}},reset:function(){P(n,!1)},errors:l,isDirty:f,setIsDirty:d,isBusy:p,setIsBusy:h,step:b,setStep:y,validate:B,validationWatcher:m,meta:M,setAllMeta:T,setMeta:function(n,e){var t={};t[n]=e,T(t)}}}var c=/*#__PURE__*/i({});function f(){return c}function d(e){var t=e.children,r=l(e.defaultValues,e.options,e.defaultMeta),i=f();/*#__PURE__*/return n.createElement(i.Provider,{value:r},t)}function v(){return o(f())}var p=function(){};export{f as FormContext,d as FormContextProvider,p as ValidationResolver,l as useForm,v as useFormContext,a as useFormErrors};
