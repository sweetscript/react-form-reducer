import e,{useState as t,useReducer as r,createContext as n,useContext as s}from"react";function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a.apply(this,arguments)}function o(){const[e,r]=t({}),n={errors:e,has:t=>e&&!!Object.getOwnPropertyDescriptor(e,t),hasErrors:()=>Object.keys(e).length>0,get:t=>n.has(t)?e[t]:[],first:t=>{var r;return n.has(t)?null==e||null==(r=e[t])?void 0:r[0]:null},all:()=>e,add:(t,s)=>{const o=a({},e);n.has(t)||(o[t]=[]),-1===o[t].indexOf(s)&&o[t].push(s),r(o)},set:e=>{r(e)},forget:t=>{if(t){if(e[t]){const n=a({},e);delete n[t],r(n)}}else n.hasErrors()&&r({})}};return n}function i(e,n,s){const i=o(),[l,u]=t(!1),[d,c]=t(!1),[f,p]=t(1),{onUpdateFields:h}=n||{},[v,g]=r((e,t)=>a({},e,t),e),[b,y]=r((e,t)=>a({},e,t),s),O=(e,t=!0)=>{h&&(e=h(e)),g(e),u(t)},m=(e,t)=>{const r={};r[e]=t,O(r,!0),i.forget(e)},x=e=>t=>{const r=t.currentTarget||t.target,n=r.getAttribute("type")||"text";-1!==["checkbox","radio"].indexOf(n)?m(e,r instanceof HTMLInputElement&&r.checked):-1!==["number","range"].indexOf(n)?m(e,Number(r.value)):m(e,r.value)},I=e=>t=>{m(e,t)},j=e=>{y(e)};return{fields:v,setFields:O,setField:m,handleInputChange:x,assignFieldInput:e=>({onChange:x(e),value:null==v?void 0:v[e],disabled:d}),assignFieldUI:e=>({value:null==v?void 0:v[e],disabled:d,onChange:I(e),error:i.has(e),helperText:i.first(e)||void 0}),reset:()=>{O(e,!1)},errors:i,isDirty:l,setIsDirty:u,isBusy:d,setIsBusy:c,step:f,setStep:p,validate:async e=>{const t=null==n?void 0:n.validation;if(!t)throw new Error("No validator resolver passed");const r=t.validate(v,e);return 1==r?{passed:!0}:(i.set(r),{passed:!1,error:r})},meta:b,setAllMeta:j,setMeta:(e,t)=>{const r={};r[e]=t,j(r)}}}const l=/*#__PURE__*/n({});function u(){return l}function d({children:t,defaultValues:r,options:n,defaultMeta:s}){const a=i(r,n,s),o=u();/*#__PURE__*/return e.createElement(o.Provider,{value:a},t)}function c(){return s(u())}class f{}export{u as FormContext,d as FormContextProvider,f as ValidationResolver,i as useForm,c as useFormContext,o as useFormErrors};
